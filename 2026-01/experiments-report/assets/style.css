/* Forethought Research â€” January experiments UI */

:root {
  --background: #fbfaf4;
  --foreground: #2f2a26;
  --text-muted: #6b6560;
  --border: #e5e2da;
  --surface: #ffffff;
  --accent: #2f2a26;
  --accent-light: #f5f4f0;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: var(--background);
  color: var(--foreground);
  line-height: 1.6;
  min-height: 100vh;
}

/* Navigation */
nav {
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: sticky;
  top: 0;
  z-index: 100;
}

nav .container {
  max-width: 1200px;
  width: 100%;
  padding: 0 1.5rem;
  display: flex;
  align-items: center;
  gap: 2rem;
}

nav .logo {
  height: 32px;
  width: auto;
}

nav a {
  color: var(--text-muted);
  text-decoration: none;
  font-size: 0.875rem;
  font-weight: 500;
  transition: color 0.15s;
}

nav a:hover {
  color: var(--foreground);
}

nav a.active {
  color: var(--foreground);
}

/* Main content - centered narrow column with breakout support */
main {
  --content-width: 65ch;
  --breakout-width: 1200px;

  max-width: var(--breakout-width);
  margin: 0 auto;
  padding: 2rem 1.5rem;

  /* CSS Grid for centered content with breakout */
  display: grid;
  grid-template-columns:
    1fr
    min(var(--content-width), 100%)
    1fr;
}

/* All direct children go in center column by default */
main > * {
  grid-column: 2;
}

/* Wide elements break out to full width */
main > table:not(.table-narrow),
main > details:not(.prompt-card):not(.critique-card),
main > .flowchart,
main > .filter-bar,
main > hr,
main > #critique-list,
main > #unique-critiques-list {
  grid-column: 1 / -1;
}

/* Critique cards break out even when nested in wrapper divs */
main .critique-card {
  max-width: var(--breakout-width);
  width: calc(100% + 16rem);
  margin-left: -8rem;
  margin-right: -8rem;
}

/* Typography */
h1 {
  font-size: 2rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

h2 {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 1rem;
  margin-top: 2rem;
}

h2:first-child {
  margin-top: 0;
}

h3 {
  font-size: 1.125rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
  margin-top: 1.5rem;
}

p, ul, ol {
  margin-bottom: 1rem;
}

ul, ol {
  padding-left: 1.5em;
}

ul { list-style-type: disc; }
ol { list-style-type: decimal; }
li { margin-bottom: 0.25em; }

.subtitle {
  color: var(--text-muted);
  font-size: 1.125rem;
  margin-bottom: 2rem;
}

/* Lead text (intro paragraph) */
main > p:first-of-type {
  font-size: 1.125rem;
}

/* Cards */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;
}

.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 1.5rem;
  text-decoration: none;
  color: inherit;
  transition: border-color 0.15s, box-shadow 0.15s;
  display: block;
}

.card:hover {
  border-color: var(--foreground);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.card h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1.125rem;
}

.card p {
  color: var(--text-muted);
  margin: 0;
  font-size: 0.875rem;
}

.card .meta {
  margin-top: 0.75rem;
  font-size: 0.75rem;
  color: var(--text-muted);
}

/* Prose content */
.prose {
  /* Width handled by grid in main */
}

.prose h1, .prose h2, .prose h3, .prose h4 {
  font-weight: 600;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

.prose h1 { font-size: 2em; }
.prose h2 { font-size: 1.5em; }
.prose h3 { font-size: 1.25em; }
.prose h4 { font-size: 1.1em; }

.prose p { margin-bottom: 1em; }

.prose ul, .prose ol {
  margin-bottom: 1em;
  padding-left: 1.5em;
}

.prose ul { list-style-type: disc; }
.prose ol { list-style-type: decimal; }
.prose li { margin-bottom: 0.25em; }

.prose > *:first-child { margin-top: 0; }

.prose code {
  background: rgba(127, 127, 127, 0.1);
  padding: 0.2em 0.4em;
  border-radius: 0.25em;
  font-size: 0.9em;
}

.prose pre {
  background: rgba(127, 127, 127, 0.1);
  padding: 1em;
  border-radius: 0.5em;
  overflow-x: auto;
  margin-bottom: 1em;
}

.prose pre code {
  background: none;
  padding: 0;
}

.prose blockquote {
  border-left: 4px solid var(--border);
  padding-left: 1em;
  margin-left: 0;
  color: var(--text-muted);
  font-style: italic;
}

.prose table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1em;
}

.prose th, .prose td {
  border: 1px solid var(--border);
  padding: 0.5em 0.75em;
  text-align: left;
}

.prose th {
  background: var(--accent-light);
  font-weight: 600;
}

.prose strong {
  font-weight: 600;
}

/* Tables (standalone) */
table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1.5rem;
  background: var(--surface);
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid var(--border);
}

th, td {
  padding: 0.75rem 1rem;
  text-align: left;
  border-bottom: 1px solid var(--border);
}

th {
  background: var(--accent-light);
  font-weight: 600;
  font-size: 0.875rem;
}

td {
  font-size: 0.875rem;
}

tr:last-child td {
  border-bottom: none;
}

tr:hover {
  background: var(--accent-light);
}

td.num, th.num {
  text-align: right;
}

.data-table {
  max-width: 42rem;
}

.data-table tfoot td {
  border-top: 2px solid var(--border);
}

/* Hidden columns */
.col-hidden {
  display: none;
}

/* Score indicators */
.score-high { color: #059669; font-weight: 600; }
.score-mid { color: #d97706; font-weight: 600; }
.score-low { color: #dc2626; font-weight: 600; }

/* Badges */
.badge {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
  border-radius: 4px;
  background: var(--accent-light);
  color: var(--foreground);
}

/* Buttons */
.btn {
  display: inline-block;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  text-decoration: none;
  border-radius: 6px;
  transition: all 0.15s;
  cursor: pointer;
  border: none;
}

.btn-primary {
  background: var(--foreground);
  color: var(--background);
}

.btn-primary:hover {
  opacity: 0.9;
}

.btn-secondary {
  background: var(--surface);
  color: var(--foreground);
  border: 1px solid var(--border);
}

.btn-secondary:hover {
  border-color: var(--foreground);
}

/* Expandable sections */
details {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  margin-bottom: 0.75rem;
}

summary {
  padding: 1rem;
  cursor: pointer;
  font-weight: 500;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
}

/* Title can wrap; badge+score stay together on one line */
summary > span:first-child {
  flex: 1 1 auto;
  min-width: 0;
}

summary > span:last-child {
  flex-shrink: 0;
  white-space: nowrap;
  align-self: flex-start;
}

summary:hover {
  background: var(--accent-light);
}

details[open] summary {
  border-bottom: 1px solid var(--border);
}

details .content {
  padding: 1rem;
}

details .content pre {
  background: var(--accent-light);
  padding: 1rem;
  border-radius: 6px;
  overflow-x: auto;
  font-size: 0.8rem;
  line-height: 1.5;
  white-space: pre-wrap;
  word-wrap: break-word;
  max-height: 500px;
  overflow-y: auto;
}

/* Score grid */
.score-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.score-box {
  background: var(--accent-light);
  padding: 0.5rem;
  border-radius: 4px;
  text-align: center;
}

.score-box .label {
  font-size: 0.65rem;
  color: var(--text-muted);
  text-transform: uppercase;
}

.score-box .value {
  font-size: 1.25rem;
  font-weight: 600;
  font-family: ui-monospace, monospace;
}

.score-box.overall {
  background: var(--foreground);
  color: var(--background);
}

.score-box.overall .label {
  color: rgba(255, 255, 255, 0.7);
}

.score-box.overall .value {
  color: var(--background);
}

/* Reasoning text */
.reasoning {
  color: var(--text-muted);
  font-size: 0.875rem;
  line-height: 1.6;
}

/* Two-column layout */
.two-column {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-top: 1rem;
}

.two-column .column h4 {
  margin: 0 0 0.5rem 0;
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.column-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 0.5rem;
}

.column-header h4 {
  margin-bottom: 0;
}

.prompt-label {
  font-size: 0.75rem;
  color: var(--text-muted);
  font-weight: 500;
}

.two-column .column {
  min-width: 0;
}

.critique-text {
  font-size: 0.875rem;
  line-height: 1.6;
  color: var(--foreground);
  background: var(--accent-light);
  padding: 1rem;
  border-radius: 6px;
}

@media (max-width: 768px) {
  .two-column {
    grid-template-columns: 1fr;
  }
}

/* Tabs */
.tabs {
  display: flex;
  gap: 0;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1.5rem;
}

.tab {
  padding: 0.75rem 1.25rem;
  font-size: 0.875rem;
  font-weight: 500;
  text-decoration: none;
  color: var(--text-muted);
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
  transition: all 0.15s;
}

.tab:hover {
  color: var(--foreground);
}

.tab.active {
  color: var(--foreground);
  border-bottom-color: var(--foreground);
}

/* Footer */
footer {
  max-width: 1200px;
  margin: 4rem auto 0;
  padding: 2rem 1.5rem;
  border-top: 1px solid var(--border);
  color: var(--text-muted);
  font-size: 0.875rem;
}

/* Section dividers */
hr {
  border: none;
  border-top: 1px solid var(--border);
  margin: 3rem 0;
}

/* Table footnotes */
.table-footnote {
  margin-top: 0.5rem;
  font-size: 0.8125rem;
  color: var(--text-muted);
}

/* Utilities */
.mt-1 { margin-top: 0.5rem; }
.mt-2 { margin-top: 1rem; }
.mt-3 { margin-top: 1.5rem; }
.mt-4 { margin-top: 2rem; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.mb-3 { margin-bottom: 1.5rem; }
.mb-4 { margin-bottom: 2rem; }
.text-muted { color: var(--text-muted); }
.text-sm { font-size: 0.875rem; }
.font-mono { font-family: ui-monospace, monospace; }

/* Prompt cards in intro section */
.prompt-card {
  margin-bottom: 1rem;
}

.prompt-card summary {
  font-size: 0.9375rem;
}

.prompt-card summary .text-muted {
  font-weight: 400;
  font-size: 0.8125rem;
}

/* Flowchart */
.flowchart {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  overflow-x: auto;
  padding: 0rem 1rem 1rem;
  max-width: 100%;
  margin: 1.5rem 0;
}

.step-wrapper {
  display: flex;
  align-items: center;
  position: relative;
}

.flowchart .step {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 0.625rem 0.875rem;
  min-width: 120px;
  max-width: 140px;
  text-align: center;
  font-size: 0.75rem;
  line-height: 1.4;
  color: var(--foreground);
  flex-shrink: 0;
}

.flowchart .step-number {
  font-size: 0.625rem;
  font-weight: 600;
  color: var(--text-muted);
  margin-bottom: 0.25rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.flowchart .step-title {
  font-weight: 500;
}

.flowchart .step.highlighted {
  border: 2px solid #FA7248;
  background: #fff8f6;
}

.flowchart .step.highlighted .step-number {
  color: #FA7248;
}

.experiment-label {
  position: absolute;
  top: -2rem;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  font-size: 0.6875rem;
  font-weight: 600;
  color: #FA7248;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.experiment-label::after {
  content: '';
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 6px solid #FA7248;
}

.flowchart .arrow {
  width: 24px;
  height: 2px;
  background: var(--border);
  position: relative;
  flex-shrink: 0;
}

.flowchart .arrow::after {
  content: '';
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 0;
  height: 0;
  border-top: 4px solid transparent;
  border-bottom: 4px solid transparent;
  border-left: 6px solid var(--border);
}

/* Filter bar */
.filter-bar {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 1rem 1.25rem;
  margin-bottom: 1.5rem;
  display: flex;
  flex-wrap: wrap;
  gap: 1.25rem;
  align-items: center;
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.filter-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.filter-pills {
  display: flex;
  gap: 0.375rem;
  flex-wrap: wrap;
}

.pill {
  padding: 0.375rem 0.75rem;
  font-size: 0.8125rem;
  font-weight: 500;
  border: 1px solid var(--border);
  border-radius: 100px;
  background: var(--background);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
  font-family: inherit;
}

.pill:hover {
  border-color: var(--foreground);
  color: var(--foreground);
}

.pill.active {
  background: var(--foreground);
  border-color: var(--foreground);
  color: var(--background);
}

.filter-count {
  margin-left: auto;
  font-size: 0.8125rem;
  color: var(--text-muted);
}

.filter-count span {
  font-weight: 600;
  color: var(--foreground);
}

.filter-explainer {
  font-size: 0.875rem;
  color: var(--muted);
  margin: 0.75rem 0 0;
  font-style: italic;
}

@media (max-width: 768px) {
  .filter-bar {
    flex-direction: column;
    align-items: flex-start;
  }

  .filter-count {
    margin-left: 0;
    margin-top: 0.5rem;
  }
}

/* Sticky results filter bar */
#results-filter-bar {
  position: sticky;
  top: 0;
  z-index: 100;
  margin-left: calc(-50vw + 50%);
  margin-right: calc(-50vw + 50%);
  width: 100vw;
  border-radius: 0;
  border-left: none;
  border-right: none;
  padding: 0;
}

#results-filter-bar .filter-bar-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem 1.5rem;
  display: flex;
  flex-wrap: wrap;
  gap: 1.25rem;
  align-items: center;
}

/* When stuck, add subtle shadow */
#results-filter-bar.is-stuck {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* Hide filter bar when scrolled past Examples section */
#results-filter-bar.filter-hidden {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
}

/* Show all button */
.show-all-btn {
  display: block;
  width: 100%;
  padding: 0.75rem 1rem;
  margin: 1rem 0;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 0.5rem;
  font-size: 0.875rem;
  color: var(--foreground);
  cursor: pointer;
  transition: all 0.15s ease;
  font-family: inherit;
}

.show-all-btn:hover {
  border-color: var(--foreground);
  background: var(--accent-light);
}

.show-all-btn.hidden {
  display: none;
}

/* Todo notes */
.todo {
  color: #bbb;
  font-style: italic;
}

/* Heading anchor links */
h1[id],
h2[id],
h3[id] {
  position: relative;
}
h1[id] .anchor-link,
h2[id] .anchor-link,
h3[id] .anchor-link {
  opacity: 0;
  color: var(--text-muted);
  text-decoration: none;
  position: absolute;
  right: 100%;
  padding-right: 0.3em;
  font-weight: 400;
  transition: opacity 0.15s;
}
h1[id]:hover .anchor-link,
h2[id]:hover .anchor-link,
h3[id]:hover .anchor-link {
  opacity: 1;
}
h1[id] .anchor-link:hover,
h2[id] .anchor-link:hover,
h3[id] .anchor-link:hover {
  color: var(--foreground);
}

/* Tooltip */
.tooltip-trigger {
  position: relative;
  border-bottom: 1px dotted var(--text-muted);
  cursor: help;
}

.tooltip-trigger .tooltip {
  display: none;
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--foreground);
  color: var(--background);
  padding: 0.75rem 1rem;
  border-radius: 6px;
  font-size: 0.85rem;
  line-height: 1.5;
  width: 360px;
  max-width: 90vw;
  z-index: 10;
  margin-top: 0.5rem;
  font-weight: normal;
}

.tooltip-trigger:hover .tooltip {
  display: block;
}

/* Hidden critiques (before Show all is clicked) */
.unique-hidden,
.all-hidden {
  display: none;
}

/* Experiment list (index page) */
.experiment-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-top: 2rem;
}

.experiment-card {
  display: block;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 1.25rem 1.5rem;
  text-decoration: none;
  color: inherit;
  transition: border-color 0.15s, box-shadow 0.15s;
}

.experiment-card:hover {
  border-color: var(--foreground);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.experiment-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.experiment-header h2 {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
}

.experiment-card p {
  margin: 0;
  color: var(--text-muted);
  font-size: 0.9375rem;
}

.status-badge {
  display: inline-block;
  padding: 0.25rem 0.625rem;
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-radius: 100px;
}

.status-complete {
  background: #d4f0d4;
  color: #166534;
}

.status-progress {
  background: #fef3c7;
  color: #92400e;
}

/* In-progress experiment cards */
.experiment-card:has(.status-progress) {
  opacity: 0.7;
}

/* Highlighted table rows (light green background) */
tr.highlight-green {
  background-color: #d4f0d4;
}

tr.highlight-green:hover {
  background-color: #c4e8c4;
}

.status-reference {
  background: var(--accent-light);
  color: var(--text-muted);
}

/* Research page source link */
.source-link {
  font-size: 0.8125rem;
  color: var(--text-muted);
  margin-bottom: 1.5rem;
}

.source-link a {
  color: var(--text-muted);
  text-decoration: none;
  border-bottom: 1px solid var(--border);
}

.source-link a:hover {
  color: var(--foreground);
  border-color: var(--foreground);
}

/* Research page collapsible query section */
details.query-section {
  margin-bottom: 1.5rem;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--accent-light);
}

details.query-section summary {
  font-weight: 600;
  padding: 0.75rem 1rem;
  cursor: pointer;
}

details.query-section .query-content {
  padding: 0 1rem 1rem;
  border-top: 1px solid var(--border);
}

details.query-section .query-content p {
  margin-bottom: 0.75rem;
}

details.query-section .query-content ul,
details.query-section .query-content ol {
  margin-bottom: 0.75rem;
  padding-left: 1.5rem;
}

/* Research page model responses - break out of narrow column */
main > .model-response {
  grid-column: 1 / -1;
}

/* Question list for research appendix */
main > #question-list {
  grid-column: 1 / -1;
}
